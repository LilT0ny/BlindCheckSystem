version: '3.8'

services:
  # Base de datos MongoDB
  mongo:
    image: mongo:latest
    container_name: blindcheck-mongo
    ports:
      - "27017:27017"
    volumes:
      - mongo_data:/data/db

  # Backend (FastAPI)
  backend:
    build:
      context: ./backend
    container_name: blindcheck-backend
    ports:
      - "8000:8000"
    depends_on:
      - mongo
    environment:
      # Conexi√≥n a Mongo usando el nombre del servicio "mongo"
      - MONGODB_URL=mongodb://mongo:27017
      - DATABASE_NAME=BlindCheck
      - SECRET_KEY=a8f5f167f44f4964e6c998dee827110c
      - ALGORITHM=HS256
      - ACCESS_TOKEN_EXPIRE_MINUTES=30
      - ENCRYPTION_KEY=b9e4aa6b7c6d4f32a1b8e5c9d7f3e4a2

  # Frontend (React + Nginx)
  frontend:
    build:
      context: ./frontend
    container_name: blindcheck-frontend
    ports:
      - "8080:80"
    depends_on:
      - backend

volumes:
  mongo_data:
